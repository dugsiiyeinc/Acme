<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gift Card</title>
    <link
      rel="icon"
      href="https://assets.website-files.com/5e7ff3ec0c4ef4c974fa99e3/5e8651e2daefb4744237fd55_Favicon%20-%20Red.png"
    />
    <!-- fonts awesome  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <!-- main css  -->
    <link rel="stylesheet" href="details.css" />
  </head>
  <body>
    <header>
      <!--start-anouncment-->
      <div class="anouncement">
          <p>
              <a href="/AnnouncmentPage/announ.html"><span>Announcement</span>
              How we're responding to COVID-19</a>
          </p>
      </div>

      <!--end-anouncment -->
      <!-- hamburger menu-Responsive -->

      <div class="cont-parent">
          <div class="hamburger">
              <i class="fa-solid fa-bars" data-visible="true"></i>
              <i class="fa-solid fa-bars bar" data-visible="false"></i>
          </div>
          <nav class="container">
              <div class="menus">
                 <a href="/index.html"></a> <div class="logo">
                      <img src="https://assets.website-files.com/5e7ff3ec0c4ef4c974fa99e3/5e7ff57adad44d1f072965b6_logo.svg"
                          alt=""></a>
                  </div>
                  <ul class="nav-links">
                      <li><a href="/index.html">Home</a></li>
                      <li><a href="/HomePage/About.html">About</a></li>
                      <li><a href="/ShopPage/shop.html">Shop</a></li>
                      <li><a href="/ShopPage/Donate.html">Donate</a></li>
                      <li><a href="/contactpage/contact.html">Contact</a></li>
                      <li><a href="#" class="shoping"><i class="fa-solid fa-cart-shopping"></i><span class="quantity">0</span></a></li>
                  </ul>
              </div>
          </nav>
          <div class="logo-respon">
              <div class="logo">
                  <a href="/index.html"><img src="https://assets.website-files.com/5e7ff3ec0c4ef4c974fa99e3/5e7ff57adad44d1f072965b6_logo.svg"
                      alt=""></a>
                      <li><a href="#" class="logos-btn"><i class="fa-solid fa-cart-shopping"></i></a></li>
              </div>

          </div>
      </div>
      <!-- Start-Mobile-Menu -->
      <nav class="mobile-menu" data-visible="false">
          <div class="navigation">    
              <div class="menu-link">
                  <li><a href="/index.html">Home</a></li>
                  <li><a href="/HomePage/About.html">About</a></li>
                  <li><a href="/ShopPage/shop.html">Shop</a></li>
                  <li><a href="/ShopPage/shop.html">Donate</a></li>
                  <li><a href="/contactpage/contact.html">Contact</a></li>
              </div>
          </div>
      </nav>

  </header>
  <div class="whiteTent-section">
    <div class="container text-tent">
   <h1>Gift Card</h1>
    </div>
   </div> 
    <!-- ====== Cards  -->
  <div class="list"></div>
  <div class="cardd" data-visible="false">
      <h1>Your Cart</h1>
      <ul class="listCard"></ul>
      <div class="checkOut">
          <div class="total">0</div>
          <div class="closeShopping">Close</div>
          <button onclick="cancelOrder()">Cancel Order</button>
      </div>
  </div>
     
    <section class="container prodeuct-heading content-section">
      <!-- left side for image -->
      <div class="image4 dimension-imgs"></div>

      <!-- left side for image -->
      <div class="content-tent">
        <h2>Gift Card</h2>
        <p><strong>$ 25.00 USD</strong></p>
        <form id="addToCartForm1">
          <label for="quantity1">Quantity</label>
          <input type="number" name="quantity" id="quantity1" min="1" value="1" />
          <input type="submit" value="Add to Cart" />
        </form>
        <div class="rich-texts">
          <h2>Whatâ€™s a Rich Text element?</h2>
          <p>
            The rich text element allows you to create and format headings,
            paragraphs, blockquotes, images, and video all in one place instead
            of having to add and format them individually. Just double-click and
            easily create content.
          </p>
          <h4>Static and dynamic content editing</h4>
          <p>
            A rich text element can be used with static or dynamic content. For
            static content, just drop it into any page and begin editing. For
            dynamic content, add a rich text field to any collection and then
            connect a rich text element to that field in the settings panel.
            Voila!
          </p>
          <h4>How to customize formatting for each rich text</h4>
          <p>
            Headings, paragraphs, blockquotes, figures, images, and figure
            captions can all be styled after a class is added to the rich text
            element using the "When inside of" nested selector system.
          </p>
          <h3>Tweet about #AcmeOutdoors products</h3>
          <a href=""><i class="fa-brands fa-x-twitter"></i>Post</a>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="container">
          <div class="content-foter">
              <div class="img-icon">
              <a href="/index.html"><img src="https://assets.website-files.com/5e7ff3ec0c4ef4c974fa99e3/5e7ff57adad44d1f072965b6_logo.svg"
              alt=""></a>
              <div class="icon">
                  <i class="fa-brands fa-square-twitter"></i>
                  <i class="fa-brands fa-facebook"></i>
                  <i class="fa-brands fa-instagram"></i>
              </div>
              </div>
             
          </div>
      </div>
    
    </footer>
    <script >
      let openShopping = document.querySelector('.shoping');
  let closeShopping = document.querySelector('.closeShopping');
  let list = document.querySelector('.list');
  let listCard = document.querySelector('.listCard');
  let body = document.querySelector('body');
  let total = document.querySelector('.total');
  let quantity = document.querySelector('.quantity');
  
  openShopping.addEventListener('click', () => {
      body.classList.add('active');
  });
  closeShopping.addEventListener('click', () => {
      body.classList.remove('active');
  });
  
  let listCards = [];
  let products = [
      {
          name: "Gif Card",
          price: 25.00,
          image: '2.jpg'
      },
      // {
      //     name: "Blue Canvas Pack",
      //     price: 95.00,
      //     image: '2.jpg'
      // },
      // {
      //     name: "Red Sleeping Bag",
      //     price: 50.00,
      //     image: '3.jpg'
      // }
  ];
  
  function initApp() {
      // products.forEach((value, key) => {
      //     let newDiv = document.createElement('div');
      //     newDiv.classList.add('item');
      //     newDiv.innerHTML = `
      //         <img src="image/${value.image}">
      //         <div class="title">${value.name}</div>
      //         <div class="price">${value.price.toLocaleString()}</div>
      //         <button onclick="addToCart(${key}, 1)">Add To Cart</button>`;
      //     list.appendChild(newDiv);
      // });
      loadCart();
  }
  
  document.getElementById('addToCartForm1').addEventListener('submit', function(event) {
      event.preventDefault();
      let quantity = document.getElementById('quantity1').value;
      addToCart(0, quantity); // 0 is the index for "White Tent"
  });
  
  document.getElementById('addToCartForm2')?.addEventListener('submit', function(event) {
      event.preventDefault();
      let quantity = document.getElementById('quantity2').value;
      addToCart(1, quantity); // 1 is the index for "Blue Canvas Pack"
  });
  
  // document.getElementById('addToCartForm3').addEventListener('submit', function(event) {
  //     event.preventDefault();
  //     let quantity = document.getElementById('quantity3').value;
  //     addToCart(2, quantity); // 2 is the index for "Red Sleeping Bag"
  // });
  
  function addToCart(key, quantity = 1) {
      let product = products[key];
      let existingProduct = listCards.find(item => item.name === product.name);
  
      if (existingProduct) {
          existingProduct.quantity += parseInt(quantity);
      } else {
          listCards.push({
              ...product,
              quantity: parseInt(quantity)
          });
      }
  
      saveCart();
      updateCart();
  }
  
  function updateCart() {
      listCard.innerHTML = '';
      let totalAmount = 0;
      let itemCount = 0;
      listCards.forEach((item, index) => {
          let li = document.createElement('li');
          li.innerHTML = `
              <div><img src="image/${item.image}" /></div>
              <div>${item.name}</div>
              <div>$${item.price.toLocaleString()} x 
                  <input type="number" min="1" value="${item.quantity}" onchange="changeQuantity(${index}, this.value)">
              </div>
              <button onclick="removeItem(${index})">Remove</button>`;
          listCard.appendChild(li);
          totalAmount += item.price * item.quantity;
          itemCount += parseInt(item.quantity);
      });
      total.innerText = `$${totalAmount.toFixed(2)}`;
      quantity.innerText = itemCount;
  }
  
  function removeItem(index) {
      listCards.splice(index, 1);
      saveCart();
      updateCart();
  }
  
  function changeQuantity(index, newQuantity) {
      if (newQuantity <= 0) {
          removeItem(index);
      } else {
          listCards[index].quantity = parseInt(newQuantity);
          saveCart();
          updateCart();
      }
  }
  
  function saveCart() {
      localStorage.setItem('.shoping', JSON.stringify(listCards));
  }
  
  function loadCart() {
      let storedCart = localStorage.getItem('.shoping');
      if (storedCart) {
          listCards = JSON.parse(storedCart);
          updateCart();
      }
  }
  
  function cancelOrder() {
      listCards = [];
      saveCart();
      updateCart();
      body.classList.remove('active');
  }
  
  
  
  // initApp();
  
  
  const hamburger = document.querySelector('.hamburger');
  const mobileMenu = document.querySelector(".mobile-menu");
  const icons = document.querySelectorAll("i");
  
  hamburger.addEventListener("click", function(event) {
      const isVisible = mobileMenu.getAttribute('data-visible');
      if (isVisible == "true") {
          mobileMenu.setAttribute('data-visible', "false");
          icons[0].setAttribute('data-visible', "true");
          icons[1].setAttribute('data-visible', "false");
      } else if (isVisible == "false") {
          mobileMenu.setAttribute('data-visible', "true");
          icons[0].setAttribute('data-visible', "false");
          icons[1].setAttribute('data-visible', "true");
      }
  });
  
  // For test 
  // hamburger.addEventListener("click", function (event){
  //     console.log("active")
  // })
  
  initApp();
  
  
    </script>
  </body>
</html>
